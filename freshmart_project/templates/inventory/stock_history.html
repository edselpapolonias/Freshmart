{% include "partials/header.html" %}
<body class="sb-nav-fixed">
{% include "partials/navbar.html" %}

<div id="layoutSidenav">
    {% include "partials/sidebar.html" %}
    <div id="layoutSidenav_content">
        <main>
            <div class="container mt-4">
                <h2 class="mb-4">Stock History</h2>
                <div class="card shadow-sm">
                    <div class="card-body">
                        <table class="table table-bordered table-striped mt-2">
                            <thead class="table-dark">
                                <tr>
                                    <th>Product Code</th>
                                    <th>Product Name</th>
                                    <th>Old Quantity</th>
                                    <th>Input Quantity</th>
                                    <th>New Quantity</th>
                                    <th>Action</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in history %}
                                <tr>
                                    <td>{{ item.product.product_code }}</td>
                                    <td>{{ item.product.product_name }}</td>
                                    <td>{{ item.old_quantity }}</td>
                                    <td>{{ item.input_quantity }}</td>
                                    <td>{{ item.new_quantity }}</td>
                                    <td>
                                        {% if item.action == 'ADD' %}
                                            <span class="text-success">{{ item.get_action_display }}</span>
                                        {% else %}
                                            <span class="text-danger">{{ item.get_action_display }}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ item.date|date:"M d, Y H:i" }}</td>
                                </tr>
                                {% empty %}
                                <tr><td colspan="7" class="text-center">No stock history available.</td></tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
        {% include "partials/footer.html" %}
    </div>
</div>
{% include "partials/scripts.html" %}
</body>
</html>
